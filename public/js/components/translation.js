var translations = {
    en: {
        adm_title: 'Admin Zone',
        adm_lob: 'Logout',
        adm_dzs: 'Danger Zone ðŸ’€',
        adm_wss: 'Website security',
        adm_rls: 'Recent logs',
        adm_sck: 'Security check',
        adm_upd: 'Updates : ',
        adm_dbm: 'Debug mode',
        adm_dbt: 'Shows precise error messages for easier problem-solving',
        adm_uvm: 'User View',
        adm_uvt: 'View and manage your account as normal users',
        adm_swt: 'Switch',
        adm_qna: 'Q&A',
        adm_qat: 'Change the content of the Q&A page',
        adm_qam: 'Modify',
        adm_lvc: 'Live chat',
        adm_lct: 'Answer to users concerns',
        adm_lcm: 'Manage',
        hed_dash: 'Dashboard',
        hed_log: 'Login',
        hed_qna: 'Q&A',
        hed_tra: 'FR',
        qae_title: 'Q&A Editor',
        qae_cancel: 'Cancel',
        qae_save: 'Save',
        upd_close: 'Close',
        upd_upd: 'Update',
        reg_title: 'Create an account',
        reg_sub: 'Welcome aboard.',
        reg_name: 'Name',
        reg_spw: 'Show passwords',
        reg_pw: 'Password',
        reg_cpw: 'Confirm password',
        reg_cac: 'Create account',
        reg_log: 'Login instead',
        log_title: 'Login to your account',
        log_sub: 'Let\'s jump in.',
        log_pwt: 'Password',
        log_spw: 'Show password',
        log_stc: 'Stay connected',
        log_fpw: 'Forgot password ?',
        log_log_but: 'Login',
        log_reg_but: 'Register instead',
        faq_title: 'Frequently Asked Questions',
        con_ass: 'Need assistance?',
        con_des: 'We\'re here to help, feel free to contact us',
        dsh_title: 'Dashboard',
        fot_tou: 'Terms of use',
        fot_leg: 'Legal notice',
        fot_lau: 'Learn more about us at: ',
        ver_tit: 'Account verified',
        ver_sub: 'You\'re ready to go',
        onb_p1: 'Thank you for joining the release preview',
        onb_p2: 'Our website is still in preview, and we are working hard to make it perfect',
        onb_p3: 'More updates are coming soon ðŸš€',
        onb_jin: 'Jump in !',
        pwr_title: 'Lost your password?',
        pwr_sub: 'We\'re here to help.',
        pwr_snd: 'Send email',
        usr_title: 'Account',
        usr_log: 'Logout',
        usr_desc: 'Manage your information and devices',
        usr_dvs: 'Device setup',
        usr_dst: 'Click to pair a new device and add it to your account',
        usr_usn: 'Name',
        usr_cng: 'Change',
        usr_pwt: 'Password',
        usr_ydt: 'Your device : ',
        usr_dsn: 'Serial number : ',
        usr_dpd: 'Purchase date : ',
        usr_drm: 'Remove',
        usr_dci: 'Copy Info',
        usr_dct: 'Device Controls',
        usr_dcs: 'Status',
        usr_dch: 'Humidity',
        usr_dcb: 'Battery saver',
        hom_slg: 'Music that adapts to you.',
        hom_int: 'Introducing',
        hom_p1d: 'Pulse 1 is a headset with various sensors built-in which allow continuous measurements of user\'s surrounding.\n' +
            '            Data is reviewed with on-device processing and used for tuning automatically the audio to provide a new sound experience.\n' +
            '            Enhanced.',
        hom_gbt: 'Grounbreaking technologies',
        hom_ads: 'Adaptive sound',
        hom_as1: 'Adaptive Sound is a proprietary technology that aims to improve the audio experience to an astounding level.',
        hom_as2: 'Adaptive Sound is made of powerful algorithms that takes 15+ entries to determine how the sound should be enhanced.',
        hom_as3: 'The headset is measuring itself various factors such as circadian rhythm, time, weather, activity.',
        hom_ces: 'Cutting-edge sensors',
        hom_asm: 'And so much more...',
        hom_shr: 'Heart Rate',
        hom_sat: 'Air Temperature',
        hom_san: 'Ambient Noise',
        hom_sah: 'Air Humidity',
        hom_yic: 'You\'re in control',
        hom_sbd: 'Secure by design',
        hom_edb: 'Encrypted by design',
        hom_ed2: 'Your data is synced and securely stored on our side.',
        hom_odp: 'On-device processing',
        hom_op2: 'Sensible data never leaves your device and is deleted after a short time.',
        hom_enc: 'Encapsulation',
        hom_en2: 'Data is encapsulated while in transit to ensure a safe and reliable transfer.',

    },
    fr: {
        adm_title: 'Zone Administrateur',
        adm_lob: 'DÃ©connexion',
        adm_dzs: 'Zone de Danger ðŸ’€',
        adm_wss: 'SÃ©curitÃ© du site',
        adm_rls: 'Logs rÃ©cents',
        adm_sck: 'Check de sÃ©curitÃ©',
        adm_upd: 'Mises Ã  jour : ',
        adm_dbm: 'Mode debug',
        adm_dbt: 'Affiche les erreurs prÃ©cises',
        adm_uvm: 'Vue lambda',
        adm_uvt: 'Voir votre compte en tant qu\'utilisateur',
        adm_swt: 'Changer',
        adm_qna: 'FAQ',
        adm_qat: 'Modifier les questions frÃ©quentes',
        adm_qam: 'Modifier',
        adm_lvc: 'Assistance',
        adm_lct: 'Assister les utilisateurs',
        adm_lcm: 'Aider',
        hed_dash: 'Tableau de bord',
        hed_log: 'Connexion',
        hed_qna: 'FAQ',
        hed_tra: 'EN',
        qae_title: 'Editeur de FAQ',
        qae_cancel: 'Annuler',
        qae_save: 'Enregistrer',
        upd_close: 'Quitter',
        upd_upd: 'Mettre Ã  jour',
        reg_title: 'CrÃ©er un compte',
        reg_sub: 'Bienvenue.',
        reg_name: 'PrÃ©nom',
        reg_spw: 'Afficher les mots de passe',
        reg_pw: 'Mot de passe',
        reg_cpw: 'Confirmer le mot de passe',
        reg_cac: 'CrÃ©er un compte',
        reg_log: 'Se connecter',
        log_title: 'Connectez-vous',
        log_sub: 'C\'est parti.',
        log_pwt: 'Mot de passe',
        log_spw: 'Afficher le mot de passe',
        log_stc: 'Rester connectÃ©',
        log_fpw: 'Mot de passe oubliÃ© ?',
        log_log_but: 'Connexion',
        log_reg_but: 'CrÃ©er un compte',
        faq_title: 'Questions frÃ©quentes',
        con_ass: 'Besoin d\'aide ?',
        con_des: 'Nous sommes toujours lÃ  pour vous aider',
        dsh_title: 'Tableau de bord',
        fot_tou: 'Conditions d\'utilisation',
        fot_leg: 'Mentions lÃ©gales',
        fot_lau: 'Plus d\'informations sur : ',
        ver_tit: 'Compte vÃ©rifiÃ©',
        ver_sub: 'Vous Ãªtes dÃ©sormais fin prÃªts',
        onb_p1: 'Merci d\'avoir rejoint la dÃ©mo de notre site',
        onb_p2: 'Le site est encore en dÃ©veloppement, des bugs peuvent Ãªtre prÃ©sents',
        onb_p3: 'De nouvelles fonctionnalitÃ©s arrivent sous peu ðŸš€',
        onb_jin: 'C\'est parti',
        pwr_title: 'Mot de passe oubliÃ© ?',
        pwr_sub: 'Nous sommes lÃ  pour vous',
        pwr_snd: 'RÃ©initialiser le mot de passe',
        usr_title: 'Compte utilisateur',
        usr_log: 'DÃ©connexion',
        usr_desc: 'GÃ©rer vos infos et vot appareils',
        usr_dvs: 'Ajouter un appareil',
        usr_dst: 'Cliquez pour ajouter un appareil',
        usr_usn: 'Nom',
        usr_cng: 'Changer',
        usr_pwt: 'Mot de passe',
        usr_ydt: 'Votre appareil : ',
        usr_dsn: 'NÂ° de sÃ©rie : ',
        usr_dpd: 'Date d\'ajout : ',
        usr_drm: 'Supprimer',
        usr_dci: 'Copier les infos',
        usr_dct: 'Gestion',
        usr_dcs: 'Statut',
        usr_dch: 'HumiditÃ©',
        usr_dcb: 'Mode Eco',
        hom_slg: 'Une musique faite pour vous.',
        hom_int: 'Pour vous',
        hom_p1d: 'Pulse 1 est un casque audio qui sait rÃ©cupÃ©rer les donnÃ©es environmentales et physiologiques de l\'utilisateur ' +
            'afin d\'assurer une expÃ©rience musicale unique.',
        hom_gbt: 'Des technologies novatrices',
        hom_ads: 'Adaptive sound',
        hom_as1: 'Adaptive Sound est une technologie brevetÃ©e qui amÃ©liore l\'expÃ©rience audio Ã  un niveau jamais-vu.',
        hom_as2: 'Adaptive Sound est composÃ© de plusieurs algorithmes, parÃ©s Ã  toutes les situations.',
        hom_as3: 'GrÃ¢ce au casque, Adaptive Sound, intÃ¨gre de nombreux facteurs tels que la mÃ©tÃ©o et l\'Ã©tat de son utilisateur.',
        hom_ces: 'Des capteurs de prÃ©cision',
        hom_asm: 'Et bien d\'autres aspects...',
        hom_shr: 'Rythme cardiaque',
        hom_sat: 'TempÃ©rature ambiante',
        hom_san: 'Niveau sonore',
        hom_sah: 'HumiditÃ© ambiante',
        hom_yic: 'C\'est vous qui avez le contrÃ´le.',
        hom_sbd: 'SÃ©curitÃ© avant tout.',
        hom_edb: 'Des donnÃ©es protÃ©gÃ©es',
        hom_ed2: 'Vos donnÃ©es sont stockÃ©es de maniÃ¨re sÃ©curisÃ©e chez nous.',
        hom_odp: 'Traitement immÃ©diat',
        hom_op2: 'Les donnÃ©es les plus sensibles ne quittent jamais le casque.',
        hom_enc: 'Encapsulation',
        hom_en2: 'Nos technologies utilisent les derniÃ¨res techniques de chiffrement.',
    }
};

function setTranslateListener(){
    const button = document.querySelector('#translate-button');
    const newButton = button.cloneNode(true);
    button.parentNode.replaceChild(newButton, button);
    document.querySelector('#translate-button').addEventListener('click', () => {
        clickedLanguageButton();
    });
}

function clickedLanguageButton(){
    switchLanguage();
    updateText();
}

function initLanguage(){
    let language = localStorage.getItem('language');
    if (language === null) {
        console.log("No language selected. Set to fr")
        language = 'fr';
        localStorage.setItem('language', language);
    }
}

function switchLanguage() {
    switchPHPLanguageCookie();
    let language = localStorage.getItem('language');
    if(language === 'en'){
        language = 'fr';
    } else {
        language = 'en';
    }
    localStorage.setItem('language', language);
    console.log("Language changed to " + language);
    document.documentElement.lang = language;
    location.reload();
}
function updateText() {
    let lang = localStorage.getItem('language')
    console.log("Refreshing text to " + lang);
    const elements = document.querySelectorAll('[lang-id]');
    elements.forEach(element => {
        const key = element.getAttribute('lang-id');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
}

function switchPHPLanguageCookie() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState === 4 && this.status === 200) {
            // Empty response as we only want to trigger the  function in PHP
        }
    };
    xhttp.open("GET", "app/core/SwitchCookie.php", true);
    xhttp.send();
}

initLanguage();
setTranslateListener();
updateText();

